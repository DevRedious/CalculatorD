!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e=["T4_Abyssal","T4_Celestial","T5_Nidhogg","T5_Chaos","T5_Order","T6_Normal","T6_Giga","T7_DodoBleu","T7_DodoRouge","T7_WReaper","T7_WGiga","T8_Ascension","T8_Descension","T9_1Seal","T9_2Seal","T9_3Seal","T9_4Seal","T9_Cube"],t=Object.fromEntries(e.map(e=>[e,e.replace("_"," ")])),s="icons-20260117T210540Z-1-001/icons/",n=0,o=0,i=999,a="calculator_selection",r=1e3,l=10,c=300,u=3e3,h="dark",d="calculator_theme";function T(e){return t[e]??e}const _={Artefact:{icon:`${s}artefact.png`,costs:{T4_Abyssal:2,T4_Celestial:2,T5_Nidhogg:4,T5_Chaos:3,T5_Order:3,T6_Normal:3,T6_Giga:3,T7_DodoBleu:3,T7_DodoRouge:3,T7_WReaper:3,T7_WGiga:3,T8_Ascension:5,T8_Descension:5,T9_1Seal:3,T9_2Seal:5,T9_3Seal:5,T9_4Seal:5,T9_Cube:3}},"Abyssal Warfare Key":{icon:`${s}abyssal_key.png`,costs:{T5_Nidhogg:1,T5_Chaos:1,T5_Order:1,T8_Ascension:1,T8_Descension:1,T9_1Seal:1,T9_2Seal:1,T9_3Seal:1,T9_4Seal:1,T9_Cube:1}},"Celestial Warfare Key":{icon:`${s}celestial_key.png`,costs:{T5_Nidhogg:1,T5_Chaos:1,T5_Order:1,T8_Ascension:1,T8_Descension:1,T9_1Seal:1,T9_2Seal:1,T9_3Seal:1,T9_4Seal:1,T9_Cube:1}},"Ancient Token Cluster":{icon:`${s}ancient_token.png`,costs:{T4_Abyssal:1,T4_Celestial:1,T5_Nidhogg:3,T5_Chaos:1,T5_Order:1,T6_Normal:2,T6_Giga:3,T7_DodoBleu:2,T7_DodoRouge:2,T7_WReaper:2,T7_WGiga:2,T8_Ascension:3,T8_Descension:3,T9_1Seal:5,T9_2Seal:6,T9_3Seal:6,T9_4Seal:6,T9_Cube:3}},"Combat Essence":{icon:`${s}combat_essence.png`,costs:{T4_Abyssal:10,T4_Celestial:10,T5_Nidhogg:10,T5_Chaos:10,T5_Order:10,T7_DodoBleu:10,T7_DodoRouge:10}},"Devilish Soul":{icon:`${s}devilish_soul.png`,costs:{T4_Abyssal:12,T5_Nidhogg:24,T5_Chaos:10,T5_Order:10,T6_Normal:10,T6_Giga:15,T7_DodoBleu:10,T7_DodoRouge:10,T7_WReaper:15,T7_WGiga:15,T8_Ascension:40,T8_Descension:40,T9_1Seal:35,T9_2Seal:40,T9_3Seal:40,T9_4Seal:60,T9_Cube:40}},"Divine Soul":{icon:`${s}divine_soul.png`,costs:{T4_Celestial:12,T5_Nidhogg:24,T5_Chaos:10,T5_Order:10,T6_Normal:10,T6_Giga:15,T7_DodoBleu:10,T7_DodoRouge:10,T7_WReaper:15,T7_WGiga:15,T8_Ascension:40,T8_Descension:40,T9_1Seal:35,T9_2Seal:40,T9_3Seal:40,T9_4Seal:60,T9_Cube:40}},"Devilish Hide":{icon:`${s}devilish_hide.png`,costs:{T4_Abyssal:500,T5_Nidhogg:3e3,T5_Chaos:1e3,T5_Order:1e3,T6_Normal:1e3,T6_Giga:2e3,T7_DodoBleu:1e3,T7_DodoRouge:1e3,T7_WReaper:1e3,T7_WGiga:1e3,T9_Cube:5e3}},"Divine Hide":{icon:`${s}divine_hide.png`,costs:{T4_Celestial:500,T5_Nidhogg:3e3,T5_Chaos:1e3,T5_Order:1e3,T6_Normal:1e3,T6_Giga:2e3,T7_DodoBleu:1e3,T7_DodoRouge:1e3,T7_WReaper:1e3,T7_WGiga:1e3,T9_Cube:5e3}},"Excellent Soul":{icon:`${s}excellent_soul.png`,costs:{T4_Abyssal:20,T4_Celestial:20,T5_Nidhogg:30,T5_Chaos:25,T5_Order:25,T6_Normal:25,T6_Giga:30,T7_DodoBleu:20,T7_DodoRouge:20,T7_WReaper:30,T7_WGiga:30,T8_Ascension:60,T8_Descension:60,T9_Cube:60}},"Unreal Essence":{icon:`${s}unreal_essence.png`,costs:{T4_Abyssal:50,T4_Celestial:50,T5_Nidhogg:1e3,T5_Chaos:100,T5_Order:100}},"Black Pearl":{icon:`${s}black_pearl.png`,costs:{T4_Abyssal:500,T4_Celestial:500,T5_Nidhogg:1500,T5_Chaos:1e3,T5_Order:1e3,T6_Normal:1e3,T6_Giga:1500,T7_DodoBleu:800,T7_DodoRouge:800,T7_WReaper:1e3,T7_WGiga:1e3,T8_Ascension:2e3,T8_Descension:2e3,T9_1Seal:1e3,T9_2Seal:1500,T9_3Seal:1500,T9_4Seal:1500,T9_Cube:2e3}},"Devilish Essence":{icon:`${s}devilish_essence.png`,costs:{T4_Abyssal:1}},"Divine Essence":{icon:`${s}divine_essence.png`,costs:{T4_Celestial:1}},"Abyssal Energy":{icon:`${s}abyssal_energy.png`,costs:{T4_Abyssal:10}},"Celestial Energy":{icon:`${s}celestial_energy.png`,costs:{T4_Celestial:10}},"Chaos Warchief Soul":{icon:`${s}chaos_warchief_soul.png`,costs:{T6_Normal:2,T6_Giga:2}},"Order Warchief Soul":{icon:`${s}order_warchief_soul.png`,costs:{T6_Normal:2,T6_Giga:2}},"Bionic Essence":{icon:`${s}bionic_essence.png`,costs:{T6_Giga:500}},"Bionic Soul":{icon:`${s}bionic_soul.png`,costs:{T7_DodoBleu:5,T7_DodoRouge:5,T7_WReaper:6,T7_WGiga:6}},"Descended Ingot":{icon:`${s}descended_ingot.png`,costs:{T7_DodoBleu:400,T7_DodoRouge:400,T7_WReaper:800,T7_WGiga:800,T9_1Seal:500,T9_2Seal:450,T9_3Seal:450,T9_4Seal:600}},"Ascended Warden Essence":{icon:`${s}ascended_warden_essence.png`,costs:{T7_WGiga:5,T8_Ascension:10,T9_Cube:8}},"Descended Warden Essence":{icon:`${s}descended_warden_essence.png`,costs:{T7_WReaper:5,T8_Descension:10,T9_Cube:8}},"Luminous Essence":{icon:`${s}luminous_essence.png`,costs:{T7_WReaper:200}},"Ancient Essence":{icon:`${s}ancient_essence.png`,costs:{T7_WGiga:1e3}},"Bionic Giga Essence":{icon:`${s}bionic_giga_essence.png`,costs:{T8_Ascension:1,T8_Descension:1}},"Descended Essence":{icon:`${s}descended_essence.png`,costs:{T7_WReaper:1e3,T7_WGiga:1e3,T8_Ascension:2500,T8_Descension:2500,T9_1Seal:2e3,T9_2Seal:3e3,T9_3Seal:3e3,T9_4Seal:3e3}},"Excellent Essence":{icon:`${s}excellent_essence.png`,costs:{T8_Ascension:2e3,T8_Descension:2e3}},"Warden Rex Trophy":{icon:`${s}warden_rex_trophy.png`,costs:{T8_Ascension:5,T8_Descension:5}},"Warden Spino Trophy":{icon:`${s}warden_spino_trophy.png`,costs:{T8_Ascension:5,T8_Descension:5}},"Warden Lizard Trophy":{icon:`${s}warden_lizard_trophy.png`,costs:{T8_Ascension:5,T8_Descension:5}},"Warden Theri Trophy":{icon:`${s}warden_theri_trophy.png`,costs:{T8_Ascension:5,T8_Descension:5}},"Supreme Warden Giga Trophy":{icon:`${s}supreme_warden_giga_trophy.png`,costs:{T8_Ascension:1,T8_Descension:1,T9_Cube:1}},"Supreme Warden Reaper Trophy":{icon:`${s}supreme_warden_reaper_trophy.png`,costs:{T8_Ascension:1,T8_Descension:1,T9_Cube:1}},"Soul of Ascension God":{icon:`${s}soul_ascension_god.png`,costs:{T9_1Seal:1,T9_2Seal:1,T9_3Seal:1,T9_4Seal:1,T9_Cube:1}},"Soul of Descension God":{icon:`${s}soul_descension_god.png`,costs:{T9_1Seal:1,T9_2Seal:1,T9_3Seal:1,T9_4Seal:1,T9_Cube:1}},"Seal Fragments":{icon:`${s}seal_fragment.png`,costs:{T9_Cube:2}}};function p(e,t){const s=_[e];return s&&s.costs?s.costs[t]??0:0}class g{constructor(){this.selection={},this.previousResults={},this.history=[],this.onChange=null,this.onHistoryChange=null,this.initSelection(),this.load()}initSelection(){e.forEach(e=>{this.selection[e]=n})}changeTier(t,s){if(!e.includes(t))return void console.warn(`Tier invalide: ${t}`);const o=(this.selection[t]??n)+s;this.setTier(t,o)}setTier(t,s,a=!1){if(!e.includes(t))return void console.warn(`Tier invalide: ${t}`);let r=parseInt(s);isNaN(r)&&(r=n),r=Math.max(o,Math.min(i,r)),this.selection[t]=r,this.scheduleSave(),!a&&this.onChange&&this.onChange(t,r)}getTier(e){return this.selection[e]??n}calculate(){const e={};for(const[t,s]of Object.entries(this.selection))if(0!==s)for(const n in _){const o=p(n,t);o>0&&(e[n]=(e[n]||0)+o*s)}return this.previousResults=e,e}calculateSorted(){const e=this.calculate();return Object.keys(e).sort((e,t)=>e.localeCompare(t,"fr",{sensitivity:"base"})).map(t=>({item:t,quantity:e[t],icon:_[t].icon}))}reset(){e.forEach(e=>{this.selection[e]=n}),this.previousResults={},this.save(),this.onChange&&this.onChange(null,null)}clearTier(e){this.setTier(e,n)}export(){return JSON.stringify({version:1,selection:this.selection,timestamp:Date.now()},null,2)}import(t){try{const s=JSON.parse(t);if(!s.selection||"object"!=typeof s.selection)throw new Error("Format invalide");for(const[t,n]of Object.entries(s.selection))e.includes(t)&&"number"==typeof n&&this.setTier(t,n,!0);return this.onChange&&this.onChange(null,null),this.save(),!0}catch(s){return console.error("Erreur lors de l'import:",s),!1}}save(){try{localStorage.setItem(a,this.export())}catch(e){console.error("Erreur lors de la sauvegarde:",e)}}scheduleSave(){this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.save()},r)}load(){try{const e=localStorage.getItem(a);if(e)return this.import(e)}catch(e){console.error("Erreur lors du chargement:",e)}return!1}addToHistory(){const e={timestamp:Date.now(),selection:{...this.selection},results:this.calculate()};this.history.unshift(e),this.history.length>l&&this.history.pop(),this.onHistoryChange&&this.onHistoryChange(this.history)}restoreFromHistory(e){if(e<0||e>=this.history.length)return!1;const t=this.history[e];for(const[s,n]of Object.entries(t.selection))this.setTier(s,n,!0);return this.onChange&&this.onChange(null,null),!0}getHistory(){return this.history}clearHistory(){this.history=[],this.onHistoryChange&&this.onHistoryChange(this.history)}exportResults(e="text"){const t=this.calculateSorted();switch(e){case"text":default:return this.exportAsText(t);case"markdown":return this.exportAsMarkdown(t);case"csv":return this.exportAsCSV(t);case"json":return JSON.stringify(t,null,2)}}exportAsText(e){let t="R√©sultats du Calculateur ARK: Primal Descended\n";t+="=".repeat(50)+"\n\n";for(const{item:s,quantity:n}of e)t+=`${s}: ${n}\n`;return t}exportAsMarkdown(e){let t="# R√©sultats du Calculateur ARK: Primal Descended\n\n";t+="| Item | Quantit√© |\n",t+="|------|----------|\n";for(const{item:s,quantity:n}of e)t+=`| ${s} | ${n} |\n`;return t}exportAsCSV(e){let t="Item,Quantit√©\n";for(const{item:s,quantity:n}of e)t+=`"${s}",${n}\n`;return t}hasChanges(){return Object.values(this.selection).some(e=>e>0)}getSummary(){const e=Object.entries(this.selection).filter(([e,t])=>t>0),t=e.reduce((e,[t,s])=>e+s,0),s=Object.keys(this.calculate()).length;return{tiersSelected:e.length,totalQuantity:t,totalItemTypes:s}}}class m{constructor(e){this.calculator=e,this.tiersContainer=document.getElementById("tiers"),this.resultsContainer=document.getElementById("results"),this.resetBtn=document.getElementById("resetBtn"),this.tierInputs={},this.inputTimeout=null,this.toastTimeout=null,this.init()}init(){this.createTiersUI(),this.setupEventListeners(),this.calculator.onChange=this.onCalculatorChange.bind(this),this.updateResults()}createTiersUI(){e.forEach(e=>{const t=this.createTierElement(e);this.tiersContainer.appendChild(t)})}createTierElement(e){const t=document.createElement("div");t.className="tier",t.setAttribute("data-tier",e);const n=document.createElement("div");n.className="tier-header";const a=document.createElement("img");a.src=`${s}${e}.png`,a.alt=T(e),a.loading="lazy",a.className="tier-icon";const r=document.createElement("div");r.className="tier-info";const l=document.createElement("div");l.className="tier-name",l.textContent=T(e);const c=document.createElement("span");c.className="tier-category",c.textContent=this.getTierCategory(e),r.appendChild(l),r.appendChild(c),n.appendChild(a),n.appendChild(r);const u=document.createElement("p");u.className="tier-description",u.textContent=`S√©lectionnez la quantit√© de ${T(e)} n√©cessaire pour votre calcul.`;const h=document.createElement("div");h.className="counter";const d=document.createElement("button");d.className="minus",d.setAttribute("data-tier",e),d.setAttribute("data-action","decrement"),d.setAttribute("aria-label",`Diminuer ${T(e)}`),d.textContent="‚àí";const _=document.createElement("input");_.type="number",_.id=`count-${e}`,_.className="count",_.setAttribute("data-tier",e),_.min=o,_.max=i,_.value=this.calculator.getTier(e),_.setAttribute("aria-label",`Quantit√© ${T(e)}`),this.tierInputs[e]=_;const p=document.createElement("button");return p.className="plus",p.setAttribute("data-tier",e),p.setAttribute("data-action","increment"),p.setAttribute("aria-label",`Augmenter ${T(e)}`),p.textContent="+",h.appendChild(d),h.appendChild(_),h.appendChild(p),t.appendChild(n),t.appendChild(u),t.appendChild(h),t}getTierCategory(e){return e.startsWith("T4")?"TIER 4":e.startsWith("T5")?"TIER 5":e.startsWith("T6")?"TIER 6":e.startsWith("T7")?"TIER 7":e.startsWith("T8")?"TIER 8":e.includes("Celestial")?"C√âLESTE":e.includes("Abyssal")?"ABYSSAL":"TIER"}setupEventListeners(){this.tiersContainer.addEventListener("click",this.handleTierClick.bind(this)),this.tiersContainer.addEventListener("input",this.handleTierInput.bind(this)),this.resetBtn&&this.resetBtn.addEventListener("click",this.handleReset.bind(this)),this.tiersContainer.addEventListener("keydown",this.handleKeyDown.bind(this))}handleTierClick(e){const t=e.target.closest("button");if(!t)return;const s=t.getAttribute("data-tier"),n=t.getAttribute("data-action");if(s&&n)switch(n){case"increment":this.calculator.changeTier(s,1);break;case"decrement":this.calculator.changeTier(s,-1);break;case"clear":this.calculator.clearTier(s)}}handleTierInput(e){const t=e.target;if(!t.classList.contains("count"))return;const s=t.getAttribute("data-tier");s&&(clearTimeout(this.inputTimeout),this.inputTimeout=setTimeout(()=>{const e=parseInt(t.value);this.calculator.setTier(s,e)},c))}handleKeyDown(e){e.target.classList.contains("count")&&"Enter"===e.key&&(e.preventDefault(),e.target.blur())}handleReset(){this.calculator.reset(),this.showToast("Tous les compteurs ont √©t√© r√©initialis√©s")}onCalculatorChange(t,s){if(null===t)e.forEach(e=>{const t=this.tierInputs[e];t&&(t.value=this.calculator.getTier(e))});else{const e=this.tierInputs[t];e&&(e.value=s)}this.updateResults()}updateResults(){const e=this.calculator.calculateSorted();0!==e.length?(this.resultsContainer.innerHTML="",e.forEach(({item:e,quantity:t,icon:s})=>{const n=this.createResultElement(e,t,s);this.resultsContainer.appendChild(n)})):this.resultsContainer.innerHTML='<p class="no-results">S√©lectionnez des tiers pour voir les ressources n√©cessaires</p>'}createResultElement(e,t,s){const n=document.createElement("div");n.className="result",n.setAttribute("data-item",e);const o=document.createElement("img");o.src=s,o.alt=e,o.loading="lazy";const i=document.createElement("span");i.textContent=`${e}: `;const a=document.createElement("strong");return a.textContent=t,n.appendChild(o),n.appendChild(i),n.appendChild(a),n}showToast(e,t=u){const s=document.querySelector(".toast");s&&s.remove();const n=document.createElement("div");n.className="toast",n.textContent=e,n.setAttribute("role","status"),n.setAttribute("aria-live","polite"),document.body.appendChild(n),n.offsetHeight,n.style.opacity="1",clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(()=>{n.style.opacity="0",setTimeout(()=>n.remove(),300)},t)}showExportDialog(){const e=[{value:"text",label:"Texte"},{value:"markdown",label:"Markdown"},{value:"csv",label:"CSV"},{value:"json",label:"JSON"}],t=prompt(`Format d'export:\n${e.map((e,t)=>`${t+1}. ${e.label}`).join("\n")}\n\nEntrez le num√©ro:`);if(null===t)return;const s=parseInt(t)-1;if(s>=0&&s<e.length){const t=e[s].value,n=this.calculator.exportResults(t);this.copyToClipboard(n),this.showToast(`R√©sultats export√©s en ${e[s].label} et copi√©s !`)}}async copyToClipboard(e){try{return await navigator.clipboard.writeText(e),!0}catch(t){console.error("Erreur lors de la copie:",t);const s=document.createElement("textarea");return s.value=e,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),!0}}downloadFile(e,t,s="text/plain"){const n=new Blob([e],{type:s}),o=URL.createObjectURL(n),i=document.createElement("a");i.href=o,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}async confirm(e){return window.confirm(e)}refreshCounters(){e.forEach(e=>{const t=this.tierInputs[e];t&&(t.value=this.calculator.getTier(e))})}}class y{theme;toggleCheckbox;constructor(){const e=localStorage.getItem(d);this.theme="dark"===e||"light"===e?e:h,this.toggleCheckbox=document.getElementById("themeToggle"),this.init()}init(){this.apply(),this.toggleCheckbox&&this.toggleCheckbox.addEventListener("change",()=>this.toggle())}toggle(){this.theme="dark"===this.theme?"light":"dark",this.apply(),localStorage.setItem(d,this.theme)}apply(){document.documentElement.setAttribute("data-theme",this.theme),this.toggleCheckbox&&(this.toggleCheckbox.checked="dark"===this.theme,this.toggleCheckbox.setAttribute("aria-label","dark"===this.theme?"Activer le th√®me clair":"Activer le th√®me sombre"))}}class C{calculator;ui;constructor(e,t){this.calculator=e,this.ui=t,this.setupFeatures()}setupFeatures(){const e=document.getElementById("exportBtn");e&&e.addEventListener("click",e=>{e.preventDefault(),this.handleExport()});const t=document.getElementById("importBtn");t&&t.addEventListener("click",e=>{e.preventDefault(),this.handleImport()});const s=document.getElementById("copyResultsBtn");s&&s.addEventListener("click",e=>{e.preventDefault(),this.handleCopyResults()}),this.setupKeyboardShortcuts()}handleExport(){const e=this.calculator.export(),t=`ark-calculator-${(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5)}.json`;this.ui.downloadFile(e,t,"application/json"),this.ui.showToast("Configuration export√©e avec succ√®s!")}async handleImport(){const e=document.createElement("input");e.type="file",e.accept=".json",e.addEventListener("change",async e=>{const t=e.target,s=t.files?.[0];if(s)try{const e=await s.text();this.calculator.import(e)?(this.ui.refreshCounters(),this.ui.showToast("Configuration import√©e avec succ√®s!")):this.ui.showToast("Erreur: fichier invalide")}catch(n){console.error("Erreur lors de l'import:",n),this.ui.showToast("Erreur lors de l'import")}}),e.click()}async handleCopyResults(){if(!this.calculator.hasChanges())return void this.ui.showToast("Aucun r√©sultat √† copier");const e=this.calculator.exportResults("text");await this.ui.copyToClipboard(e)?this.ui.showToast("R√©sultats copi√©s dans le presse-papier!"):this.ui.showToast("Erreur lors de la copie")}setupKeyboardShortcuts(){document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&"e"===e.key&&(e.preventDefault(),this.handleExport()),(e.ctrlKey||e.metaKey)&&"i"===e.key&&(e.preventDefault(),this.handleImport()),(e.ctrlKey||e.metaKey)&&e.shiftKey&&"C"===e.key&&(e.preventDefault(),this.handleCopyResults()),(e.ctrlKey||e.metaKey)&&"r"===e.key&&(e.preventDefault(),this.calculator.reset(),this.ui.showToast("Tous les compteurs ont √©t√© r√©initialis√©s"))})}}class b{calculator=null;ui=null;themeManager=null;async init(){console.log("üöÄ Initialisation du calculateur ARK: Primal Descended...");try{this.calculator=new g,console.log("‚úÖ Calculator initialis√©"),this.ui=new m(this.calculator),console.log("‚úÖ UI initialis√©e"),this.themeManager=new y,console.log("‚úÖ Theme manager initialis√©"),new C(this.calculator,this.ui),console.log("‚úÖ Feature manager initialis√©");this.calculator.hasChanges()?this.ui.showToast("Configuration restaur√©e depuis la sauvegarde"):this.ui.showToast("Bienvenue sur le calculateur ARK!"),console.log("‚ú® Application pr√™te!"),"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname||(window.arkApp={calculator:this.calculator,ui:this.ui,themeManager:this.themeManager},console.log("üîß Mode d√©veloppement: arkApp expos√© dans window"))}catch(e){console.error("‚ùå Erreur lors de l'initialisation:",e),alert("Erreur lors du chargement de l'application. Veuillez rafra√Æchir la page.")}}cleanup(){this.calculator&&this.calculator.save()}}document.addEventListener("DOMContentLoaded",()=>{const e=new b;e.init(),window.addEventListener("beforeunload",()=>{e.cleanup()})}),window.addEventListener("error",e=>{console.error("Erreur globale:",e.error)}),window.addEventListener("unhandledrejection",e=>{console.error("Promise rejet√©e:",e.reason)});
